# D2PFuzz 低TPS测试配置示例
# 适用于：基础功能测试、稳定性验证

# Server Configuration
server:
  host: "localhost"
  port: 8080
  timeout: 30

mode: "fuzz"

# Transaction Fuzzing Configuration - 低TPS设置
tx_fuzz:
  enabled: true
  chain_id: 3151908
  max_gas_price: 10000000000  # 10 Gwei - 较低的Gas价格
  max_gas_limit: 6000000      # 6M gas - 适中的Gas限制
  tx_per_second: 5            # 低TPS - 每秒5笔交易
  fuzz_duration_sec: 60       # 1分钟测试
  seed: 0
  use_accounts: true
  load_pattern_type: "constant"  # 恒定负载模式
  rpc_endpoints:
    - "http://172.16.0.11:8545"
    - "http://172.16.0.12:8545"
    - "http://172.16.0.13:8545"
  # 保守的重试设置
  max_retries: 2
  retry_delay: 2s
  circuit_breaker: true
  failure_threshold: 3

# P2P Network Configuration
p2p:
  max_peers: 25
  listen_port: 30303
  bootstrap_nodes:
    - "enode://8e7b1b24dc1b1d0685081523ea8d84d6d8c8493f42fc64a5e210d17f9bfe3594b389e893476de995905a1fcc48ccd268768e5fc4e6490863e4e1131f285efbbf@172.16.0.11:30303"
    - "enode://d388f8f5da4213fdd2593cc4867499965e7feba6baa033ef3f0de0d80d5bebe36d037268a8402ecb1a8d5fb8363f6f0338ada4e8bc6bb34e73e4fd8be016a2e3@172.16.0.12:30303"

# Fuzzing Configuration
fuzzing:
  enabled: true
  max_iterations: 500
  mutation_rate: 0.05  # 较低的变异率
  seed: 12345
  protocols:
    - "eth"

# Monitoring Configuration
monitoring:
  enabled: true
  log_level: "info"
  metrics_port: 9090
  report_interval: 30  # 更频繁的报告

# Output Configuration
output:
  directory: "./output/low_tps"
  format: "json"
  compress: true

# Log Configuration
log:
  directory: "./logs/low_tps"
  template: "default"
  auto_generate: true
  include_details: true

# 使用较少的账户进行测试
accounts:
  - address: "0x8943545177806ED17B9F23F0a21ee5948eCaa776"
    private_key: "bcdf20249abf0ed6d944c0288fad489e33f66b3960d9e6229c1cd214ed3bbe31"
  - address: "0xE25583099BA105D9ec0A67f5Ae86D90e50036425"
    private_key: "39725efee3fb28614de3bacaffe4cc4bd8c436257e2c8bb887c4b5c4be45e76d"
  - address: "0x614561D2d143621E126e87831AEF287678B442b8"
    private_key: "53321db7c1e331d93a11a41d16f004d7ff63972ec8ec7c25db329728ceeb1710"